var creator = "H L is my creator";

$(document).ready(function() {
			// grab the initial top offset of the navigation
		   	var stickyNavTop = $('.nav').offset().top;

		   	// our function that decides weather the navigation bar should have "fixed" css position or not.
		   	var stickyNav = function(){
			    var scrollTop = $(window).scrollTop(); // our current vertical position from the top

			    // if we've scrolled more than the navigation, change its position to fixed to stick to top,
			    // otherwise change it back to relative
			    if (scrollTop > stickyNavTop) {
			        $('.nav').addClass('sticky');
			    } else {
			        $('.nav').removeClass('sticky'); 
			    }
			};

			stickyNav();
			// and run it again every time you scroll
			$(window).scroll(function() {
				stickyNav();
			});
		});

$(document).ready(function($) {
  // Start mixitup
  $('#gallery .items').mixItUp({
    load: {
       filter: '.c_apartamento'
   }
  });
  //Gallery Popup
  $('#gallery .openpopup').click(function(){
    var src = $(this).attr("src");
    var currentopengall = $(this).attr("data-item");
    $(".gallpopup #currentopengall").attr("value", currentopengall);
    $('.gallpopup img').attr("src", src);
    $('.gallpopup').css({"display":"unset"});
  });

  $('.gallprev').click(function(){
    var currentimage = $(".gallpopup #currentopengall").attr("value");
    var totalitems = $('.openpopup').length;
    var previtem = currentimage-1;
    if(previtem == 0){
      previtem = totalitems;
    }
    $(".gallpopup #currentopengall").attr("value", previtem);
    var newitem = $(".gallpopup #currentopengall").attr("value");
    newitem = $("#gallery .openpopup[data-item='"+newitem+"']").attr("src");
    $('.gallpopup img').attr("src", newitem);
  });

  $('.gallnext').click(function(){
    var currentimage = $(".gallpopup #currentopengall").attr("value");
    var totalitems = $('.openpopup').length;
    var nextitem = parseInt(currentimage)+1;
    if(nextitem == totalitems+1){
      nextitem = 1;
    }
    $(".gallpopup #currentopengall").attr("value", nextitem);
    var newitem = $(".gallpopup #currentopengall").attr("value");
    newitem = $("#gallery .openpopup[data-item='"+newitem+"']").attr("src");
    $('.gallpopup img').attr("src", newitem);
  });

  $('.gallclose').click(function(){
    $(".gallpopup").css({"display":"none"});
  });
  $(document).keyup(function(e) {
       if (e.key === "Escape") { // escape key maps to keycode `27`
          // <DO YOUR WORK HERE>
          $(".gallpopup").css({"display":"none"});
      }
  });
  $('.link#mapadot').click(function(e){
    e.preventDefault();
    $('#mapaedificio').css({"display":"unset"});
    $('#edificio_puntos').css({"display":"none"});
  });
  $('#mapaedificio .closemap').click(function(){
    $('#mapaedificio').css({"display":"none"});
    $('#edificio_puntos').css({"display":"unset"});
    $('#edificio_puntos .info_popup').css({"display":"none"});
  });
});


jQuery(document).ready(function(){
  $('.link').click(function(){
    //$('#edificio_puntos .info_popup').css({"display":"unset"});
    $('#edificio_puntos .info_popup').fadeIn("slow");
  });
  $('.close_info_popup').click(function(){
    $('#edificio_puntos .info_popup').fadeOut("slow");
  });
  $('#edificio #salud').click(function(){
    $('#edificio_puntos .info_popup .titulo').html('Gimnasio');
    $('#edificio_puntos .info_popup .text').html('Tener una rutina saludable, es mejorar tu calidad de vida. Ejerc&iacute;tate en nuestro gimnasio Mira.');
    $('#edificio_puntos .info_popup .image').attr('src', 'public/images/gallery/02.espacio.png');
  });
  $('#edificio #convivir').click(function(){
    $('#edificio_puntos .info_popup .titulo').html('Convivir si importa');
    $('#edificio_puntos .info_popup .text').html('Convivir entre amigos m&aacute;s que vecinos, es mejorar tu calidad de vida. Disfruta del cafecito y &aacute;reas sociales en la Plaza de Mira.');
    $('#edificio_puntos .info_popup .image').attr('src', 'public/images/gallery/12espacio.jpg');
  });
  $('#edificio #divertirse').click(function(){
    $('#edificio_puntos .info_popup .titulo').html('Sala familiar mira');
    $('#edificio_puntos .info_popup .text').html('Disfruta de buenos momentos con amigos y familia, en la terraza y fire pit de Mira.');
    $('#edificio_puntos .info_popup .image').attr('src', 'public/images/gallery/13espacio.jpg');
  });
  $('#edificio #hogar').click(function(){
    $('#edificio_puntos .info_popup .titulo').html('Apartamentos en Mira');
    $('#edificio_puntos .info_popup .text').html('Vive en Mira, donde cada detalle de tu apartamento está pensado para mejorar tu calidad de vida.');
    $('#edificio_puntos .info_popup .image').attr('src', 'public/images/gallery/09.apartamento.jpg');
  });
});

jQuery(document).ready(function($){
  $('#apartamentos .dot[data-info="infogeneral"]').click(function(){
    $('#apartamentos .apartment_model .info_popup').fadeIn("slow");
    //$('#apartamentos .apartment_model .info_popup .text').html("<ul><li>7 ventanas</li><li>4 fachadas</li><li>Espacios flexibles para adaptarse a diferentes etapas de vida. Tener 2 habitaciones y crecer a 3. O empezar con 3, y abrir el espacio social al reducirse a 2 habitaciones.</li><li>Cocina con su propia venta y jardinera para tener un amplio huerto</li><li>Baño de visita</li><li>Promedio tamaño de ventana 2 x 2 metros</li><li>Iluminación completa en todo el apartamento</li><li>Apartamento de esquina</li><li>Área social integrada al balcón</li><li>El apartamento tiene tanto la vista de amanecer hacia la reserva natural como del atardecer con los volcanes.</li></ul>");
  });
  $('#apartamentos .apartment_model .info_popup .close_info_popup').click(function(){
    $('#apartamentos .apartment_model .info_popup').fadeOut("slow");
  });
});

jQuery(document).ready(function($){
  $('#apartamentos #citar').click(function(){
    $('.citar_popup').fadeIn("slow");
  });
  $('#apartamentos .close_citar_popup').click(function(){
    $('.citar_popup').fadeOut("slow");
  });
  $('#apartamentos #cotizar').click(function(){
    $("#apartamentos .cotizador").fadeIn("slow");
  });
  $('#apartamentos .cotizador #close').click(function(){
    $("#apartamentos .cotizador").fadeOut("slow");
  });
});


jQuery(document).ready(function($){
  $('#apartamentos #formcotizador [name="step1"]').click(function(){
    var step1val = $(this).val();
    $(".selections #rango").val(step1val);
    $('#apartamentos #formcotizador [name="step3"]').parent().hide();
    $('#apartamentos .cotizador .stepindicator#three').removeClass("current");
    if(step1val == "7000-9000"){
      $('#apartamentos .cotizador .stepindicator#two').addClass("current");
      $('#apartamentos #formcotizador [name="step2"]#step2-3').parent().show();
      $('#apartamentos #formcotizador [name="step2"]#step2-2').parent().hide();
      $('#apartamentos #formcotizador [name="step2"]#step2-1').parent().hide();
    }
    if(step1val == "9000-10000"){
      $('#apartamentos .cotizador .stepindicator#two').addClass("current");
      $('#apartamentos #formcotizador [name="step2"]#step2-3').parent().hide();
      $('#apartamentos #formcotizador [name="step2"]#step2-2').parent().show();
      $('#apartamentos #formcotizador [name="step2"]#step2-1').parent().show();
    }
    if(step1val == "10000-12500"){
      $('#apartamentos .cotizador .stepindicator#two').addClass("current");
      $('#apartamentos #formcotizador [name="step2"]#step2-3').parent().hide();
      $('#apartamentos #formcotizador [name="step2"]#step2-2').parent().hide();
      $('#apartamentos #formcotizador [name="step2"]#step2-1').parent().show();
    }
  });

  $('#apartamentos #formcotizador [name="step2"]').click(function(){
    var step2val = $(this).val();
    $(".selections #habitaciones").val(step2val);
    if(step2val == "1"){
      $('#apartamentos .cotizador .stepindicator#three').addClass("current");
      $('#apartamentos #formcotizador [name="step3"]#step3-7').parent().show();
      $('#apartamentos #formcotizador [name="step3"]#step3-6').parent().show();
      $('#apartamentos #formcotizador [name="step3"]#step3-5').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-4').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-3').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-2').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-1').parent().hide();
    }
    if(step2val == "2"){
      $('#apartamentos .cotizador .stepindicator#three').addClass("current");
      $('#apartamentos #formcotizador [name="step3"]#step3-7').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-6').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-5').parent().show();
      $('#apartamentos #formcotizador [name="step3"]#step3-4').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-3').parent().show();
      $('#apartamentos #formcotizador [name="step3"]#step3-2').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-1').parent().hide();
    }
    if(step2val == "3"){
      $('#apartamentos .cotizador .stepindicator#three').addClass("current");
      $('#apartamentos #formcotizador [name="step3"]#step3-7').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-6').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-5').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-4').parent().show();
      $('#apartamentos #formcotizador [name="step3"]#step3-3').parent().hide();
      $('#apartamentos #formcotizador [name="step3"]#step3-2').parent().show();
      $('#apartamentos #formcotizador [name="step3"]#step3-1').parent().show();
    }
    var rango_selected = $(".selections #rango").val();
    var rooms_selected = $(".selections #habitaciones").val();
    if(rango_selected == "7000-9000"){
      $('#apartamentos #formcotizador [name="step3"]').parent().hide();
      if(rooms_selected == "1"){
        $('#apartamentos #formcotizador [name="step3"]#step3-6').parent().show();
        $('#apartamentos #formcotizador [name="step3"]#step3-7').parent().show();
      }
    }
    if(rango_selected == "9000-10000"){
      $('#apartamentos #formcotizador [name="step3"]').parent().hide();
      if(rooms_selected == "2"){
        $('#apartamentos #formcotizador [name="step3"]#step3-5').parent().show();
        $('#apartamentos #formcotizador [name="step3"]#step3-3').parent().show();
      }
      if(rooms_selected == "3"){
        $('#apartamentos #formcotizador [name="step3"]#step3-4').parent().show();
      }
    }
    if(rango_selected == "10000-12500"){
      $('#apartamentos #formcotizador [name="step3"]').parent().hide();
      if(rooms_selected == "3"){
        $('#apartamentos #formcotizador [name="step3"]#step3-1').parent().show();
        $('#apartamentos #formcotizador [name="step3"]#step3-2').parent().show();
      }
    }
  });
  $('#apartamentos #formcotizador [name="step3"]').click(function(){
    var step3val = $(this).val();
    $(".selections #apartamento").val(step3val);
  });




  $("form#formcotizador").submit(function(e){
    e.preventDefault();
    var cotiname = $(".cotizador #userdata [name='name']").val();
    var cotitel = $(".cotizador #userdata [name='tel']").val();
    var cotiemail = $(".cotizador #userdata [name='email']").val();
    var rangocuotas = $(".selections #rango").val();
    var habitaciones = $(".selections #habitaciones").val();
    var apartamento = $(".selections #apartamento").val();
    $.ajax({ //ajax
        type: "POST",
        url: "mailer.php?cotizacion",
        data: "cotiname="+cotiname+"&cotitel="+cotitel+"&cotiemail="+cotiemail+"&rangocuotas="+rangocuotas+"&habitaciones="+habitaciones+"&apartamento="+apartamento,
        success: function(result){
          //alert("Se Ha enviado correctamente");
          $(".cotizador").fadeOut();
          window.location.href="gracias";
        },
        error: function(result){
          alert("Hubo un problema al enviar");
        }
    }); //ajax
  });
});


jQuery(document).ready(function($){
  $(".nosvemospronto").click(function(){
    $(this).fadeOut("slow");
  });
  $("#formcitar").submit(function(e){
    var citanombre = $("#formcitar [name='nombre']").val();
    var citaemail = $("#formcitar [name='email']").val();
    var citatel = $("#formcitar [name='tel']").val();
    var citaforma = $("#formcitar [name='forma']").val();
    var sanmartin = $("#formcitar [name='sanmartin']").val();
    var citahorario = $("#formcitar [name='horario']").val();
    var citafecha = $("#formcitar [name='fecha']").val();
    e.preventDefault();
    $.ajax({ //ajax
        type: "POST",
        url: "mailer.php?cita",
        data: "citanombre="+citanombre+"&citaemail="+citaemail+"&citatel="+citatel+"&citaforma="+citaforma+"&sanmartin="+sanmartin+"&citahorario="+citahorario+"&citafecha="+citafecha,
        success: function(result){
          //$(".nosvemospronto").fadeIn("slow");
          $(".citar_popup").fadeOut("slow");
          window.location.href="gracias";
        },
        error: function(result){
          //Error, you can print result
        }
    }); //ajax
  });
});

jQuery(document).ready(function($){
  $("#formcitar [name='forma']").change(function(){
    if ($(this).val() == "sanmartin"){
      $('[name="sanmartin"]').show();
    }else {
      $('[name="sanmartin"]').hide();
    }
  });

  $("#contacto [name='forma_contacto']").change(function(){
    if ($(this).val() == "sanmartin"){
      $('[name="cont_sanmartin"]').show();
    }else {
      $('[name="cont_sanmartin"]').hide();
    }
  });
});

jQuery(document).ready(function($){
  $("#contacto form").submit(function(e){
    var contname= $("#contacto [name='name']").val();
    var contphone = $("#contacto [name='phone']").val();
    var contaemail = $("#contacto [name='email']").val();
    var forma_contacto = $("#contacto [name='forma_contacto']").val();
    var contsanmartin = $("#contacto [name='cont_sanmartin']").val();
    var tipo_apartamento = $("#contacto [name='tipo_apartamento']").val();
    var contmessage = $("#contacto [name='message']").val();
    e.preventDefault();
    $.ajax({ //ajax
        type: "POST",
        url: "mailer.php?contacto",
        data: "contname="+contname+"&contphone="+contphone+"&contaemail="+contaemail+"&forma_contacto="+forma_contacto+"&contsanmartin="+contsanmartin+"&tipo_apartamento="+tipo_apartamento+"&contmessage="+contmessage,
        success: function(result){
          //$(".nosvemospronto").fadeIn("slow");
          window.location.href="gracias";
        },
        error: function(result){
          //Error, you can print result
        }
    }); //ajax
  });
});


/*jQuery(document).ready(function($){
  var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
  if(iOS){
    var i_p_text = $('#apartamentos .apartment_model .info_popup .text').html();
    i_p_text.replace("<ul>", "");
    i_p_text.replace("</ul>", "");
    i_p_text.replace("<li>", "- ");
    i_p_text.replace("</li>", "<br>");
    alert(i_p_text);
  }
});*/

jQuery(document).ready(function($){
  $('.slider-for').slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: false,
    fade: true,
    asNavFor: '.slider-nav'
  });
  $('.slider-nav').slick({
    slidesToShow: 3,
    slidesToScroll: 1,
    asNavFor: '.slider-for',
    initialSlide: '1',
    dots: false,
    centerMode: true,
    focusOnSelect: true,
    prevArrow:"<button class='slick-prev prev col-1'><img src='public/images/arrowL.png'></button>",
    nextArrow:"<button class='slick-next next col-1'><img src='public/images/arrowR.png'></button>",
    responsive:[
      {
        breakpoint: 600,
        settings:{
          slidesToShow: 1
        }
      }
    ]
  });
});

$(document).ready(function(){
  // Add smooth scrolling to all links
  $("a.smoothscroll").on('click', function(event) {

    // Make sure this.hash has a value before overriding default behavior
    if (this.hash !== "") {
      // Prevent default anchor click behavior
      event.preventDefault();

      // Store hash
      var hash = this.hash;

      // Using jQuery's animate() method to add smooth page scroll
      // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
      $('html, body').animate({
        scrollTop: $(hash).offset().top
      }, 800, function(){

        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = hash;
      });
    } // End if
  });
});
